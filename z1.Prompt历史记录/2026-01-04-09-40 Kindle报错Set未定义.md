**用户：** 
kindle 报错提示：
runtime error：
msg: ReferenceError : can't find variable: Set
Line 0
Src: undefined.

msg: ReferenceError : can't find variable: System
Line 0
Src: undefined.

这个需要单独起一个prompt历史记录，记录这个问题。

**智能体：** 
### 问题定位
1.  **`ReferenceError: can't find variable: Set`**：这说明 Kindle 的浏览器内核极旧（可能低于 Chrome 38 / Safari 9），不支持 ES6 的 `Set` 数据结构。
2.  **`ReferenceError: can't find variable: System`**：这是 Vite Legacy 插件使用的模块加载器 `SystemJS` 未能正确初始化。

### 根本原因
`defaults` 的浏览器目标仍然太新了。我们必须显式通过 polyfill 注入 `Set`、`Map` 等基础能力，并确保 `SystemJS` 能够运行。

### 解决方案
我们需要调整 `vite.config.js`：
1.  **降低目标版本**：将 `targets` 设为更旧的版本，如 `chrome 50` 或 `safari 9`（Kindle PW3 主要是旧版 WebKit）。
2.  **强制注入 Polyfills**：明确要求 `core-js` 填充 `es.set`、`es.map` 等特性。

接下来我将为您更新 `vite.config.js`。
